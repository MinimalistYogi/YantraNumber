<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Représentation Géométrique des Nombres</title>
    <style>
        :root {
            --background-color: #F8F1E9;
            --primary-color: #4A6FA5;
            --secondary-color: #DAA520;
            --tens-color: #FF6B99;
            --tens-stroke: #E34F7F;
            --hundreds-color: #FFB6C1;
            --hundreds-stroke: #FF95A8;
            --text-color: #333;
            --border-color: #ddd;
            --shadow: 0 4px 8px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Poppins', 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: var(--background-color);
            padding: 20px;
            line-height: 1.6;
            color: var(--text-color);
            transition: var(--transition);
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }

        .controls-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            width: 100%;
            max-width: 650px;
        }

        .input-container {
            display: flex;
            align-items: center;
            flex: 1;
            min-width: 200px;
        }

        .theme-toggle {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .theme-toggle:hover {
            transform: scale(1.05);
        }

        .slider-container {
            width: 100%;
            max-width: 650px;
            margin-bottom: 20px;
        }

        input[type="range"] {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background-color: #ddd;
            outline: none;
            transition: var(--transition);
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
        }

        input[type="number"] {
            padding: 12px;
            font-size: 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            width: 120px;
            margin-right: 10px;
            transition: var(--transition);
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }

        input[type="number"]:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
            outline: none;
        }

        button {
            padding: 12px 20px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        button:hover {
            background-color: #3a5a84;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .buttons-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .secondary-btn {
            background-color: #f8f9fa;
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .secondary-btn:hover {
            background-color: #e9ecef;
        }

        #canvas-container {
            margin-top: 20px;
            position: relative;
            transition: var(--transition);
        }

        canvas {
            border: 1px solid var(--border-color);
            background-color: var(--background-color);
            box-shadow: var(--shadow);
            border-radius: 8px;
            transition: var(--transition);
        }

        .explanation {
            margin-top: 30px;
            max-width: 650px;
            text-align: left;
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .explanation h3 {
            color: var(--primary-color);
            margin-top: 0;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
        }

        .explanation ul {
            padding-left: 20px;
        }

        .explanation li {
            margin-bottom: 8px;
        }

        .error {
            color: #e74c3c;
            margin-top: 10px;
            font-weight: 500;
            transition: var(--transition);
        }

        .legend {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px 10px;
        }

        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
            width: 100%;
            max-width: 650px;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: none;
            background: none;
            font-weight: 500;
            color: var(--text-color);
            transition: var(--transition);
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            border-bottom: 3px solid var(--primary-color);
            color: var(--primary-color);
        }

        .tab-content {
            display: none;
            width: 100%;
            max-width: 650px;
        }

        .tab-content.active {
            display: block;
        }

        /* Dark mode styles */
        body.dark-mode {
            --background-color: #2c3e50;
            --text-color: #ecf0f1;
            --border-color: #4a5c6b;
            --primary-color: #3498db;
            --secondary-color: #f1c40f;
            --tens-color: #e84393;
            --tens-stroke: #d33682;
            --hundreds-color: #fd79a8;
            --hundreds-stroke: #e84393;
        }

        body.dark-mode .explanation {
            background-color: #34495e;
        }

        body.dark-mode .secondary-btn {
            background-color: #34495e;
            color: #ecf0f1;
        }

        body.dark-mode .secondary-btn:hover {
            background-color: #2c3e50;
        }

        /* Animation classes */
        .fade-in {
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        @media (max-width: 768px) {
            .controls-container {
                flex-direction: column;
            }
            
            .buttons-container {
                flex-wrap: wrap;
            }
            
            canvas {
                width: 100%;
                height: auto;
            }
        }
    </style>
</head>
<body>
    <h1>Représentation Géométrique des Nombres (0-999)</h1>
    
    <div class="tabs">
        <button class="tab active" data-tab="visualization">Visualisation</button>
        <button class="tab" data-tab="explanation">Explication</button>
        <button class="tab" data-tab="examples">Exemples</button>
    </div>
    
    <div id="visualization" class="tab-content active">
        <div class="controls-container">
            <div class="input-container">
                <input type="number" id="number-input" min="0" max="999" placeholder="0-999" value="0">
                <button id="generate-btn">Générer</button>
            </div>
            <button class="theme-toggle" id="theme-toggle" title="Changer de thème">
                ☀️
            </button>
        </div>
        
        <div class="slider-container">
            <input type="range" id="number-slider" min="0" max="999" value="0">
        </div>
        
        <div class="buttons-container">
            <button id="prev-btn" class="secondary-btn">Précédent</button>
            <button id="next-btn" class="secondary-btn">Suivant</button>
            <button id="random-btn" class="secondary-btn">Aléatoire</button>
            <button id="animate-btn">Animation</button>
        </div>
        
        <div id="error-message" class="error"></div>
        
        <div id="canvas-container" class="fade-in">
            <canvas id="canvas" width="600" height="600"></canvas>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background-color: var(--secondary-color);"></div>
                <span>Cercles</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: var(--primary-color);"></div>
                <span>Unités</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: var(--tens-color);"></div>
                <span>Dizaines</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: var(--hundreds-color);"></div>
                <span>Centaines</span>
            </div>
        </div>
    </div>
    
    <div id="explanation" class="tab-content">
        <div class="explanation">
            <h3>Règles de représentation :</h3>
            <p><strong>Unités (à l'intérieur du premier cercle doré) :</strong></p>
            <ul>
                <li><strong>0</strong> : Cercle doré vide</li>
                <li><strong>1</strong> : Un point bleu au centre</li>
                <li><strong>2</strong> : Un segment reliant deux points sur le cercle</li>
                <li><strong>3</strong> : Un triangle équilatéral avec un sommet en haut</li>
                <li><strong>4</strong> : Un carré</li>
                <li><strong>5</strong> : Un carré + un point au centre</li>
                <li><strong>6</strong> : Deux triangles équilatéraux symétriques (un avec sommet en haut, l'autre avec sommet en bas)</li>
                <li><strong>7</strong> : Deux triangles équilatéraux symétriques + un point au centre</li>
                <li><strong>8</strong> : Deux carrés</li>
                <li><strong>9</strong> : Deux carrés + un point au centre</li>
            </ul>
            <p><strong>Dizaines (pétales roses foncés sur le premier cercle) :</strong></p>
            <ul>
                <li><strong>10</strong> : 1 pétale en haut</li>
                <li><strong>20</strong> : 2 pétales (haut et bas)</li>
                <li><strong>30</strong> : 3 pétales en triangle équilatéral</li>
                <li><strong>40</strong> : 4 pétales en carré</li>
                <li><strong>50-90</strong> : Pétales distribuées respectivement en pentagone, hexagone, heptagone, octogone et nonagone</li>
            </ul>
            <p><strong>Centaines (pétales roses clairs sur le second cercle) :</strong></p>
            <ul>
                <li><strong>100</strong> : 1 pétale en haut</li>
                <li><strong>200</strong> : 2 pétales (haut et bas)</li>
                <li><strong>300</strong> : 3 pétales en triangle équilatéral</li>
                <li><strong>400-900</strong> : Distribution similaire aux dizaines</li>
            </ul>
        </div>
    </div>
    
    <div id="examples" class="tab-content">
        <div class="explanation">
            <h3>Exemples et applications :</h3>
            <p>Cette représentation géométrique des nombres offre plusieurs avantages :</p>
            <ul>
                <li><strong>Visualisation intuitive</strong> : Elle permet de comprendre visuellement la structure décimale des nombres.</li>
                <li><strong>Modèle mental</strong> : Aide à créer un modèle mental pour comprendre les valeurs positionnelles.</li>
                <li><strong>Reconnaissance de motifs</strong> : Développe la capacité à reconnaître des motifs mathématiques.</li>
            </ul>
            <p>Exemples notables :</p>
            <ul>
                <li><strong>42</strong> : Carré avec 4 pétales roses foncés</li>
                <li><strong>100</strong> : Cercle doré vide avec 1 pétale rose clair</li>
                <li><strong>369</strong> : Triangle, 6 pétales roses foncés, 3 pétales roses clairs, et deux carrés + un point</li>
                <li><strong>777</strong> : Trois étoiles à 7 branches (symboliques)</li>
            </ul>
            <p>Utilisez les boutons de navigation pour explorer ces exemples et d'autres nombres intéressants.</p>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            const numberInput = document.getElementById('number-input');
            const numberSlider = document.getElementById('number-slider');
            const generateBtn = document.getElementById('generate-btn');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const randomBtn = document.getElementById('random-btn');
            const animateBtn = document.getElementById('animate-btn');
            const themeToggle = document.getElementById('theme-toggle');
            const errorMessage = document.getElementById('error-message');
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            // Variables d'état
            let isAnimating = false;
            let animationSpeed = 200; // ms par nombre
            let animationInterval;
            let currentNumber = 0;
            let isDarkMode = false;
            
            // Synchroniser les entrées
            numberInput.addEventListener('input', function() {
                const value = parseInt(this.value);
                if (!isNaN(value) && value >= 0 && value <= 999) {
                    numberSlider.value = value;
                    currentNumber = value;
                }
            });
            
            numberSlider.addEventListener('input', function() {
                const value = parseInt(this.value);
                numberInput.value = value;
                currentNumber = value;
                drawNumber(value);
            });
            
            // Gestionnaires d'événements
            generateBtn.addEventListener('click', function() {
                const number = parseInt(numberInput.value);
                if (isNaN(number) || number < 0 || number > 999) {
                    errorMessage.textContent = "Veuillez entrer un nombre entre 0 et 999.";
                    return;
                }
                errorMessage.textContent = "";
                currentNumber = number;
                drawNumberWithAnimation(number);
            });
            
            prevBtn.addEventListener('click', function() {
                if (currentNumber > 0) {
                    currentNumber--;
                    updateInputs();
                    drawNumberWithAnimation(currentNumber);
                }
            });
            
            nextBtn.addEventListener('click', function() {
                if (currentNumber < 999) {
                    currentNumber++;
                    updateInputs();
                    drawNumberWithAnimation(currentNumber);
                }
            });
            
            randomBtn.addEventListener('click', function() {
                const randomNum = Math.floor(Math.random() * 1000);
                currentNumber = randomNum;
                updateInputs();
                drawNumberWithAnimation(randomNum);
            });
            
            animateBtn.addEventListener('click', function() {
                if (isAnimating) {
                    stopAnimation();
                    animateBtn.textContent = "Animation";
                } else {
                    startAnimation();
                    animateBtn.textContent = "Arrêter";
                }
            });
            
            themeToggle.addEventListener('click', function() {
                toggleTheme();
            });
            
            // Onglets
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(tc => tc.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Fonction pour mettre à jour les entrées
            function updateInputs() {
                numberInput.value = currentNumber;
                numberSlider.value = currentNumber;
            }
            
            // Fonction pour démarrer l'animation
            function startAnimation() {
                isAnimating = true;
                animationInterval = setInterval(function() {
                    if (currentNumber < 999) {
                        currentNumber++;
                    } else {
                        currentNumber = 0;
                    }
                    updateInputs();
                    drawNumber(currentNumber);
                }, animationSpeed);
            }
            
            // Fonction pour arrêter l'animation
            function stopAnimation() {
                isAnimating = false;
                clearInterval(animationInterval);
            }
            
            // Fonction pour basculer le thème
            function toggleTheme() {
                isDarkMode = !isDarkMode;
                document.body.classList.toggle('dark-mode', isDarkMode);
                themeToggle.textContent = isDarkMode ? '🌙' : '☀️';
                drawNumber(currentNumber);
            }
            
            // Fonction pour dessiner le nombre avec animation
            function drawNumberWithAnimation(number) {
                const canvasContainer = document.getElementById('canvas-container');
                canvasContainer.classList.remove('fade-in');
                setTimeout(() => {
                    canvasContainer.classList.add('fade-in');
                    drawNumber(number);
                }, 50);
            }
            
            // Couleurs
            function getColors() {
                return {
                    BACKGROUND_COLOR: getComputedStyle(document.documentElement).getPropertyValue('--background-color').trim(),
                    GOLD_COLOR: getComputedStyle(document.documentElement).getPropertyValue('--secondary-color').trim(),
                    BLUE_COLOR: getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim(),
                    PINK_COLOR_TENS: getComputedStyle(document.documentElement).getPropertyValue('--tens-color').trim(),
                    PINK_STROKE_TENS: getComputedStyle(document.documentElement).getPropertyValue('--tens-stroke').trim(),
                    PINK_COLOR_HUNDREDS: getComputedStyle(document.documentElement).getPropertyValue('--hundreds-color').trim(),
                    PINK_STROKE_HUNDREDS: getComputedStyle(document.documentElement).getPropertyValue('--hundreds-stroke').trim()
                };
            }
            
            // Fonction principale pour dessiner le nombre
            function drawNumber(number) {
                const colors = getColors();
                
                // Configuration
                const canvasWidth = canvas.width;
                const canvasHeight = canvas.height;
                const centerX = canvasWidth / 2;
                const centerY = canvasHeight / 2;
                const mainRadius = Math.min(canvasWidth, canvasHeight) / 7; // Rayon du cercle principal (unités)
                const tensRadius = mainRadius * 1.3;  // Rayon du cercle fictif où se positionnent les dizaines
                const hundredsRadius = mainRadius * 1.7; // Rayon du second cercle doré (centaines)
                const pointRadius = 5; // Taille fixe pour les points bleus
                
                // Effacer le canvas et dessiner le fond
                ctx.fillStyle = colors.BACKGROUND_COLOR;
                ctx.fillRect(0, 0, canvasWidth, canvasHeight);
                
                const hundreds = Math.floor(number / 100);
                const tens = Math.floor((number % 100) / 10);
                const units = number % 10;
                
                // Afficher le nombre au-dessus du dessin
                ctx.fillStyle = isDarkMode ? '#ecf0f1' : '#333';
                ctx.font = 'bold 24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`Nombre: ${number}`, centerX, 30);
                
                // Afficher les composantes
                ctx.font = '16px Arial';
                ctx.fillText(`Centaines: ${hundreds} | Dizaines: ${tens} | Unités: ${units}`, centerX, 60);
                
                // Dessiner le second cercle doré (pour les centaines) si nécessaire
                if (hundreds > 0) {
                    ctx.beginPath();
                    ctx.arc(centerX, centerY, hundredsRadius, 0, 2 * Math.PI);
                    ctx.strokeStyle = colors.GOLD_COLOR;
                    ctx.lineWidth = 3;
                    ctx.stroke();
                    
                    // Dessiner les pétales pour les centaines
                    drawHundreds(hundreds, colors, centerX, centerY, hundredsRadius, pointRadius);
                }
                
                // Dessiner les pétales pour les dizaines
                if (tens > 0) {
                    drawTens(tens, colors, centerX, centerY, mainRadius, pointRadius);
                }
                
                // Dessiner le cercle doré principal (pour les unités)
                ctx.beginPath();
                ctx.arc(centerX, centerY, mainRadius, 0, 2 * Math.PI);
                ctx.strokeStyle = colors.GOLD_COLOR;
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // Dessiner la figure pour les unités
                drawUnits(units, colors, centerX, centerY, mainRadius, pointRadius);
            }
            
            // Fonction pour dessiner un pétale
            function drawPetal(x, y, angle, petalRadius, fillColor, strokeColor) {
                // Point de départ sur le cercle
                const startX = x;
                const startY = y;
                
                // Calculer un point perpendiculaire à l'angle pour créer la ligne plate
                const perpAngle1 = angle + Math.PI/2;
                const perpAngle2 = angle - Math.PI/2;
                
                const perpX1 = startX + petalRadius * Math.cos(perpAngle1);
                const perpY1 = startY + petalRadius * Math.sin(perpAngle1);
                const perpX2 = startX + petalRadius * Math.cos(perpAngle2);
                const perpY2 = startY + petalRadius * Math.sin(perpAngle2);
                
                // Dessiner le pétale (demi-cercle)
                ctx.beginPath();
                ctx.moveTo(perpX1, perpY1);
                
                // Dessiner le demi-cercle
                ctx.arc(startX, startY, petalRadius, perpAngle1, perpAngle2, true);
                
                // Fermer le chemin
                ctx.closePath();
                
                // Remplir et border le pétale
                ctx.fillStyle = fillColor;
                ctx.fill();
                ctx.strokeStyle = strokeColor;
                ctx.lineWidth = 1.5;
                ctx.stroke();
            }
            
            // Fonction pour dessiner les dizaines (pétales roses foncés)
            function drawTens(tens, colors, centerX, centerY, mainRadius, pointRadius) {
                const petalRadius = pointRadius * 3.2; // Taille du pétale
                
                for (let i = 0; i < tens; i++) {
                    let angle;
                    if (tens === 1) {
                        // 1 pétale en haut
                        angle = -Math.PI / 2;
                    } else if (tens === 2) {
                        // 2 pétales en haut et en bas
                        angle = -Math.PI / 2 + i * Math.PI;
                    } else {
                        // Distribuer les pétales uniformément en cercle
                        angle = -Math.PI / 2 + (i * 2 * Math.PI / tens);
                    }
                    
                    const petalStartX = centerX + mainRadius * Math.cos(angle);
                    const petalStartY = centerY + mainRadius * Math.sin(angle);
                    
                    drawPetal(petalStartX, petalStartY, angle, petalRadius, colors.PINK_COLOR_TENS, colors.PINK_STROKE_TENS);
                }
            }
            
            // Fonction pour dessiner les centaines (pétales roses clairs)
            function drawHundreds(hundreds, colors, centerX, centerY, hundredsRadius, pointRadius) {
                const petalRadius = pointRadius * 6.4; // Taille 2x celle des pétales des dizaines
                
                for (let i = 0; i < hundreds; i++) {
                    let angle;
                    if (hundreds === 1) {
                        // 1 pétale en haut
                        angle = -Math.PI / 2;
                    } else if (hundreds === 2) {
                        // 2 pétales en haut et en bas
                        angle = -Math.PI / 2 + i * Math.PI;
                    } else {
                        // Distribuer les pétales uniformément en cercle
                        angle = -Math.PI / 2 + (i * 2 * Math.PI / hundreds);
                    }
                    
                    const petalStartX = centerX + hundredsRadius * Math.cos(angle);
                    const petalStartY = centerY + hundredsRadius * Math.sin(angle);
                    
                    drawPetal(petalStartX, petalStartY, angle, petalRadius, colors.PINK_COLOR_HUNDREDS, colors.PINK_STROKE_HUNDREDS);
                }
            }
            
            // Fonction pour dessiner les unités
            function drawUnits(units, colors, centerX, centerY, mainRadius, pointRadius) {
                // Dessiner la forme correspondant au nombre d'unités
                switch(units) {
                    case 0:
                        // Cercle doré vide (déjà dessiné)
                        break;
                    case 1:
                        // Un point au centre
                        drawCenterPoint(colors, centerX, centerY, pointRadius);
                        break;
                    case 2:
                        // Un segment passant par le centre
                        drawSegment(colors, centerX, centerY, mainRadius, pointRadius);
                        break;
                    case 3:
                        // Un triangle équilatéral (un sommet en haut)
                        drawPolygon(3, -Math.PI/2, colors, centerX, centerY, mainRadius, pointRadius);
                        break;
                    case 4:
                        // Un carré
                        drawPolygon(4, 0, colors, centerX, centerY, mainRadius, pointRadius);
                        break;
                    case 5:
                        // Un carré + un point au centre
                        drawPolygon(4, 0, colors, centerX, centerY, mainRadius, pointRadius);
                        drawCenterPoint(colors, centerX, centerY, pointRadius);
                        break;
                    case 6:
                        // Deux triangles équilatéraux symétriques
                        drawPolygon(3, -Math.PI/2, colors, centerX, centerY, mainRadius, pointRadius);  // Premier triangle avec un sommet en haut
                        drawPolygon(3, Math.PI/2, colors, centerX, centerY, mainRadius, pointRadius);   // Deuxième triangle avec un sommet en bas (symétrique)
                        break;
                    case 7:
                        // Deux triangles équilatéraux symétriques + un point au centre
                        drawPolygon(3, -Math.PI/2, colors, centerX, centerY, mainRadius, pointRadius);  // Premier triangle avec un sommet en haut
                        drawPolygon(3, Math.PI/2, colors, centerX, centerY, mainRadius, pointRadius);   // Deuxième triangle avec un sommet en bas (symétrique)
                        drawCenterPoint(colors, centerX, centerY, pointRadius);
                        break;
                    case 8:
                        // Deux carrés
                        drawPolygon(4, 0, colors, centerX, centerY, mainRadius, pointRadius);
                        drawPolygon(4, Math.PI/4, colors, centerX, centerY, mainRadius, pointRadius);
                        break;
                    case 9:
                        // Deux carrés + un point au centre
                        drawPolygon(4, 0, colors, centerX, centerY, mainRadius, pointRadius);
                        drawPolygon(4, Math.PI/4, colors, centerX, centerY, mainRadius, pointRadius);
                        drawCenterPoint(colors, centerX, centerY, pointRadius);
                        break;
                }
            }
            
            // Fonction pour dessiner un point au centre
            function drawCenterPoint(colors, centerX, centerY, pointRadius) {
                ctx.beginPath();
                ctx.arc(centerX, centerY, pointRadius, 0, 2 * Math.PI);
                ctx.fillStyle = colors.BLUE_COLOR;
                ctx.fill();
            }
            
            // Fonction pour dessiner un segment passant par le centre
            function drawSegment(colors, centerX, centerY, mainRadius, pointRadius) {
                const angle = Math.PI / 2; // Angle de départ (vertical)
                
                // Calculer les points sur le cercle
                const x1 = centerX + mainRadius * Math.cos(angle);
                const y1 = centerY - mainRadius * Math.sin(angle);
                const x2 = centerX + mainRadius * Math.cos(angle + Math.PI);
                const y2 = centerY - mainRadius * Math.sin(angle + Math.PI);
                
                // Dessiner les points
                ctx.beginPath();
                ctx.arc(x1, y1, pointRadius, 0, 2 * Math.PI);
                ctx.fillStyle = colors.BLUE_COLOR;
                ctx.fill();
                
                ctx.beginPath();
                ctx.arc(x2, y2, pointRadius, 0, 2 * Math.PI);
                ctx.fillStyle = colors.BLUE_COLOR;
                ctx.fill();
                
                // Dessiner le segment
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.strokeStyle = colors.BLUE_COLOR;
                ctx.lineWidth = 2;
                ctx.stroke();
            }
            
            // Fonction pour dessiner un polygone régulier
            function drawPolygon(sides, rotationOffset, colors, centerX, centerY, mainRadius, pointRadius) {
                const points = [];
                
                // Calculer les points du polygone
                for (let i = 0; i < sides; i++) {
                    const angle = rotationOffset + (i * 2 * Math.PI / sides);
                    const x = centerX + mainRadius * Math.cos(angle);
                    const y = centerY + mainRadius * Math.sin(angle);
                    points.push({ x, y });
                }
                
                // Dessiner les points
                for (const point of points) {
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, pointRadius, 0, 2 * Math.PI);
                    ctx.fillStyle = colors.BLUE_COLOR;
                    ctx.fill();
                }
                
                // Dessiner les lignes entre les points
                ctx.beginPath();
                ctx.moveTo(points[0].x, points[0].y);
                for (let i = 1; i < points.length; i++) {
                    ctx.lineTo(points[i].x, points[i].y);
                }
                ctx.lineTo(points[0].x, points[0].y);
                ctx.strokeStyle = colors.BLUE_COLOR;
                ctx.lineWidth = 2;
                ctx.stroke();
            }
            
            // Initialiser avec le nombre 0
            drawNumber(0);
            
            // Support pour les touches flèches
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowLeft') {
                    if (currentNumber > 0) {
                        currentNumber--;
                        updateInputs();
                        drawNumberWithAnimation(currentNumber);
                    }
                } else if (e.key === 'ArrowRight') {
                    if (currentNumber < 999) {
                        currentNumber++;
                        updateInputs();
                        drawNumberWithAnimation(currentNumber);
                    }
                }
            });
            
            // Gestion des exemples rapides
            const examples = [42, 100, 369, 777];
            examples.forEach((num, index) => {
                const btn = document.createElement('button');
                btn.classList.add('secondary-btn');
                btn.textContent = num;
                btn.addEventListener('click', function() {
                    currentNumber = num;
                    updateInputs();
                    drawNumberWithAnimation(num);
                });
                document.querySelector('.buttons-container').appendChild(btn);
            });
        });
    </script>
</body>
</html>
